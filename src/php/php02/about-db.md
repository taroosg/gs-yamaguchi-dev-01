# DBの基本

## DBとは

- web上にデータを保存するためのもの．
- 構造はエクセルなどと対比するとイメージしやすい！
- データを操作するにはSQL（言語）を用いる．

## 使い所

- webアプリケーションでデータを保存する場合のほとんど．

### 利用シーンの例

- ECサイトの商品データ（商品名，画像，説明文）
- サービスに登録しているユーザの情報（ユーザ名，アドレス，etc）
- ブログの投稿内容（投稿日時，タイトル，画像，本文，etc）

## DBのデータ構造と概念

エクセルと同様のデータ構造となっている．実際にデータが格納されるのは「テーブル」であり，テーブルをどう設計するかがアプリケーションの根幹となる．

|DBの概念|エクセルの概念|
|-|-|
|データベース|エクセルファイル|
|テーブル|シート|
|レコード|行|
|カラム|列|

### 💡 Key Point

>テーブル設計を行う際には，エクセルやスプレッドシートに書き出しながら作業すると視覚的に確認できるのでオススメ．

### データ構造の例

ECサイトの商品データをイメージしたテーブルを下記に示す．

（下記のデーブル構造はまだ改善点があるが，後の講義で解説する．）

|id|product_name|price|category|image_url|
|-:|-|-:|-|-|
|1|Laphroaig|40|whisky|./images/laphroaig.png|
|2|Ardbeg|45|whisky|./images/ardbeg.png|
|3|Caolila|50|whisky|./images/caolila.png|
|4|Kilchoman|50|whisky|./images/kilchoman.png|
|5|Bowmore|45|whisky|./images/bowmore.png|
|6|PortCharlotte|55|whisky|./images/portcharlotte.png|
|...|...|..|...|...|

### DBの動き方のイメージ

「サーバ」には3種類存在し，相互に連携しながらWebアプリケーションを動作させている．ただし，Webサーバとアプリケーションサーバは区別の概念が難しいため，一旦「DBサーバとそれ以外」という理解で進めてしまってOK．

- 「Webサーバ」：ブラウザにデータを返す．
- 「アプリケーションサーバ」：PHPなどのサーバサイド言語を動かす．
- 「DBサーバ」：データを提供する．


ブラウザ，PHP，DBが連携するイメージを以下に示す．

![DBの動き方イメージ](./img/php_crud01_about-db.svg)

### 💡 Key Point

>処理の流れを把握しよう！
>
>例えば，PHPとDBを連携させ，保存されているデータを画面に表示する流れは以下のとおりとなる．
>
>1. PHPからDBサーバに接続する．
>2. DBを操作するSQLを実行し，必要なデータを取得する．
>3. 取得したデータをHTML上に反映させ，画面に表示する．
