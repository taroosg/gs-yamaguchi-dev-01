# ファイル操作（読み込み）

## ファイル読み込み処理（&画面表示）の概要

### やりたいこと

- 保存用ファイルから内容を読み出す．
- 読み出したデータをまとめ，HTMLに埋め込む．

### 必要なファイル

- ファイルのデータを読み込んで表示するファイル（`todo_txt_read.php`）


## ファイル読み込み処理の実装

### 処理の流れ

1. 出力用の変数を用意する．
2. txtファイルを開く（読み取り専用）．
3. ファイルをロックする．
4. txtファイルのデータを読み込み，繰り返し処理を用いて出力用の変数に入れる．
5. ロックを解除する．
6. ファイルを閉じる．
7. （HTML上で表示）

```php
// todo_txt_read.php

// データまとめ用の空文字変数
$str = '';

// ファイルを開く（読み取り専用）
$file = fopen('data/todo.txt', 'r');
// ファイルをロック
flock($file, LOCK_EX);

// fgets()で1行ずつ取得→$lineに格納
if ($file) {
  while ($line = fgets($file)) {
    // 取得したデータを`$str`に追加する
    $str .="<tr><td>{$line}</td></tr>";
  }
}

// ロックを解除する
flock($file, LOCK_UN);
// ファイルを閉じる
fclose($file);

// `$str`に全てのデータ（タグに入った状態）がまとまるので，HTML内の任意の場所に表示する．

```


## 練習

1. `todo_txt_read.php`で`todo.txt`の内容を読み込もう（まずは`var_dump()`で確認）！
2. 読み込んだデータをブラウザで表示しよう！
